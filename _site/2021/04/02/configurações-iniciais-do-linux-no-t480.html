<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Configurações Iniciais Do Linux No T480" /><meta name="author" content="Jefferson" /><meta property="og:locale" content="en_US" /><meta name="description" content="Algumas configurações do Pop_OS 20.10, Gnome 3.38 rodando no X11." /><meta property="og:description" content="Algumas configurações do Pop_OS 20.10, Gnome 3.38 rodando no X11." /><link rel="canonical" href="http://localhost:4000/2021/04/02/configura%C3%A7%C3%B5es-iniciais-do-linux-no-t480" /><meta property="og:url" content="http://localhost:4000/2021/04/02/configura%C3%A7%C3%B5es-iniciais-do-linux-no-t480" /><meta property="og:site_name" content="jtsilverio" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-02T00:00:00-03:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Configurações Iniciais Do Linux No T480" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Jefferson" /> <script type="application/ld+json"> {"url":"http://localhost:4000/2021/04/02/configura%C3%A7%C3%B5es-iniciais-do-linux-no-t480","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/04/02/configura%C3%A7%C3%B5es-iniciais-do-linux-no-t480"},"author":{"@type":"Person","name":"Jefferson"},"headline":"Configurações Iniciais Do Linux No T480","dateModified":"2021-04-02T00:00:00-03:00","datePublished":"2021-04-02T00:00:00-03:00","description":"Algumas configurações do Pop_OS 20.10, Gnome 3.38 rodando no X11.","@context":"https://schema.org"}</script><title> Configurações Iniciais Do Linux No T480 - jtsilverio</title><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="jtsilverio" href="/atom.xml"><link rel="alternate" type="application/json" title="jtsilverio" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,Oxygen-Sans,Ubuntu,Cantarell,helvetica neue,sans-serif;font-size:95%;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none;color:#9b9b9b}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{color:black}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.post ul,.project ul,.post ol{list-style-position:inside}main{display:flex;flex-wrap:wrap;max-width:55rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}</style></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">jtsilverio</h1>--><nav role="navigation"><ul><li><a href="/" >writing</a></li><li><a href="/about" >about</a></li><li><a href="/search" >search</a></li></ul></nav></header><section class="post"><h2>Configurações Iniciais Do Linux No T480</h2><p>Algumas configurações do Pop_OS 20.10, Gnome 3.38 rodando no X11.</p><p><img src="/assets/pop_os.png" alt="pop_os_terminal" title="Pop_Os on T480" /></p><h2 id="power-management">Power Management</h2><p>Para uma melhor gestão de energia e economia de bateria instalar o TLP e o powertop.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo add-apt-repository ppa:linrunner/tlp
sudo apt install tlp tlp-rdw -y
sudo apt install acpi-call-dkms -y
sudo apt install powertop -y
tlp start
</code></pre></div></div><p>As configurações padrões do TLP já são suficientes para melhorar o desempenho da bateria. O powertop, no entanto, deve ser calibrado e configurado. Primeiro rodar <code class="language-plaintext highlighter-rouge">sudo powertop -calibrate</code>. Em seguida, para aplicar as configurações, rodar o <code class="language-plaintext highlighter-rouge">powertop</code> ir até a ultima aba e aplicar as mudanças manualmente ou então rodar <code class="language-plaintext highlighter-rouge">sudo powertop --auto-tune</code> para setar todas as opções para GOOD automaticamente.</p><p>As configurações do powertop devem ser reaplicadas a cada nova sessão. Para automatizar esse processor é possível seguir o tutorial na wiki do Arch para inicializar o powertop como um serviço.</p><ol><li><a href="https://wiki.archlinux.org/index.php/powertop">https://wiki.archlinux.org/index.php/powertop</a></li><li><a href="https://wiki.archlinux.org/index.php/TLP">https://wiki.archlinux.org/index.php/TLP</a></li></ol><h2 id="turbo-boost-e-undervolt">Turbo Boost e Undervolt</h2><p>O T480 tem um problema com um firmware da Intel que limita o clock do processador. Para impedir que esse throttle aconteça em condições normais é preciso instalar o <code class="language-plaintext highlighter-rouge">throttled</code> por <a href="https://github.com/erpalma/throttled">esse repositório</a>. Com esse pacote também é possível fazer o undervolt. No meu T480 tenho deixado com -90mV e o sistema tem se mantido estável.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install git build-essential python3-dev libdbus-glib-1-dev libgirepository1.0-dev libcairo2-dev python3-venv python3-wheel
git clone https://github.com/erpalma/throttled.git
sudo ./throttled/install.sh
</code></pre></div></div><h2 id="hibernação">Hibernação</h2><ol><li><a href="">https://medium.com/@csatyendra02/pop-os-hibernate-enable-step-by-step-complete-tutorial-and-references-601e0ca4c96e</a></li><li><a href="">https://pop-planet.info/forums/threads/guide-to-hibernate-answer-is-a-guide.426/</a></li></ol><h2 id="bug-das-teclas-de-multimidia-em-teclados-abnt2">Bug das teclas de Multimidia em teclados ABNT2</h2><p>Existe um bug no X11 quando as teclas multimidias são usadas em conjunto com um teclado ABNT2. Nesses casos quando as teclas multimidas são pressionadas o uso dá CPU dá um pulo de alguns segundo para 100%. Esse problema e a solução estão relatados no link abaixo. Para evitar esse problema. No Wayland essas teclas funcionam sem problemas.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/share/X11/xkb/symbols/br
---
Comment the line: modifier_map Mod3 { Scroll_Lock };
</code></pre></div></div><ol><li><a href="https://askubuntu.com/questions/906723/fn-media-keys-slow-delayed-on-ubuntu-gnome-17-04">https://askubuntu.com/questions/906723/fn-media-keys-slow-delayed-on-ubuntu-gnome-17-04</a></li></ol><h2 id="libinput-gestures">libinput-gestures</h2><p>Para habilitar alguns gestos no trackpad no X11 estou usando o libinput-gestures e o xdotool. Alguns desses gestos já são implementados por padrão no Wayland mas como ainda não é possível compartilhar a tela em chamadas de vídeos no Wayland continuo usando o X11. Para instalar o <code class="language-plaintext highlighter-rouge">libinput-gestures</code> é só seguir as instruções em: <a href="https://github.com/bulletmark/libinput-gestures">https://github.com/bulletmark/libinput-gestures</a></p><p>Minhas Configurações:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/etc/libinput-gestures.conf
---
# Move workspaces
gesture swipe up	xdotool key ctrl+super+Down
gesture swipe down	xdotool key ctrl+super+Up

# Browser back/forward
gesture swipe left	3 xdotool key alt+Right
gesture swipe right	3 xdotool key alt+Left
</code></pre></div></div><h2 id="outros-programas">Outros Programas</h2><h3 id="firefox">Firefox</h3><p>Tenho usado o Firefox por ele ser o único que implementa algum tipo de kinectic scrolling no Linux. Para habilitar essa configração e a aceleração de hardware é preciso setar algumas variaveis de ambiente.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/.profile
---
export MOZ_USE_XINPUT2=1	# Smooth Scrolling
export MOZ_X11_EGL=1 		# HW Acceleration
</code></pre></div></div><h3 id="ddcutil">DDCUtil</h3><p>O ddcutil permite configurar o brilho do monitor por softaware.</p><ol><li>https://github.com/daitj/gnome-display-brightness-ddcutil/blob/master/README.md</li><li>https://extensions.gnome.org/extension/2645/brightness-control-using-ddcutil/</li></ol><h3 id="google-drive-ocaml">Google-drive-ocaml</h3><p>Como infelizmente mão existe uma solução oficial da Google para o Google Drive File Stream estou utilizando o Google-grive ocamlfuse para montar o Google Drive como uma partição. Não achei uma outra solução melhor até o momento que permita sincronizar seletivamente algumas pastas ou arquivos. Até cheguei a testar o Insynca por 15 dias mas tive alguns problemas (gerados por eu mesmo) e acabei deixando de lado. As instruções de instação estão no github: <a href="">https://github.com/astrada/google-drive-ocamlfuse</a></p><p>Para montar a partição automaticamente assim que eu esteja conectado ao wifi uso um script que é inicializado com o sistema.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/bin/bash

while true; do
  # check to see if there is a connection by pinging a Google server
  if ping -q -c 1 -W 1 8.8.8.8 &gt;/dev/null; then
    # if connected, mount the drive and break the loop
    google-drive-ocamlfuse /home/user/GoogleDrive; break;
  else
    # if not connected, wait for 10 second and then check again
    sleep 10
  fi
done
</code></pre></div></div><h2 id="configurações-estéticas">Configurações Estéticas</h2><p><img src="/assets/gtk_theme.png" alt="pop_os_terminal" title="Tema GTK" /></p><p>Tenho mudado as fontes padrões e os ícones por não achar os padões do Ubuntu/Pop_OS agradáveis. Como fonte sans-serif do sistema tenho usado a <a href="https://rsms.me/inter/">Inter</a>. Como fonte monospace tenho usado a <a href="https://github.com/tonsky/FiraCode">firacode</a>. Depois de instalada a Firacode ainda é necessário mudar algumas configurações para os editores de texto reconhecerem essa fonte como monospace.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install fonts-inter -y
sudo apt install fonts-firacode -y
sudo apt install fonts-ebgaramond -y
sudo apt purge fonts-noto* fonts-noto-cjk* fonts-noto-cjk-extra* fonts-noto-core* fonts-noto-extra* fonts-noto-mono* fonts-noto-ui-core* fonts-noto-ui-extra* fonts-noto-unhinted*
</code></pre></div></div><ol><li>Como tema do GTK tenho usado o <strong>Nextwaita</strong>: <a href="https://www.gnome-look.org/p/1289376/">https://www.gnome-look.org/p/1289376/</a></li><li>Como tema do Gnome tenho usado o <strong>AdwaitaEx</strong> por ter uma barra de status mais compacta: <a href="https://github.com/hrdwrrsk/AdwaitaExtended">https://github.com/hrdwrrsk/AdwaitaExtended</a></li><li>Como ícones tenho usado o <strong>Elementosh-Blueberry</strong>: <a href="https://www.gnome-look.org/p/1427890/">https://www.gnome-look.org/p/1427890/</a></li></ol><span class="meta"><time datetime="2021-04-02T00:00:00-03:00">April 2, 2021</time> </span></section></main></body></html>
